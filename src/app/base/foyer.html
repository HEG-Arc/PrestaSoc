
<base-nav></base-nav>
<md-content layout-padding>
  <div class="box-background" md-whiteframe="1">
    <h2>Votre foyer</h2>

    <div layout="row" layout-wrap>
      <div class="avatar-box" md-whiteframe="1" ui-sref="vous">
        <span>You</span>
        {{$ctrl.sim.dateNaissance | date}}
      </div>

      <div class="avatar-box" md-whiteframe="1" ng-repeat="p in $ctrl.sim.persons" ng-click="$ctrl.editPerson = p">
        <span>{{p.prenom}}</span>
        {{p.dateNaissance | date}}

        <md-button class="md-warn md-icon-button" aria-label="supprimer" ng-click="$ctrl.removePerson(p)">
          <md-icon>delete</md-icon>
        </md-button>
      </div>

      <md-button class="avatar-box add" ng-click="$ctrl.addPerson()">
        <span>+</span>
      </md-button>
    </div>

    // TODO: maybe add partner? constraints?
    // add other none family?
    <div ng-if="$ctrl.currentPerson" layout="column">
      <p>Edit details (maybe popup?)</p>

      <md-input-container>
        <label>Prénom</label>
        <input ng-model="$ctrl.currentPerson.prenom">
      </md-input-container>

      <md-input-container>
        <label>Date de naissance</label>
        <input ng-model="$ctrl.currentPerson.dateNaissance">
      </md-input-container>

      <label>Est</label>
      <md-input-container layout="column">
        <md-checkbox ng-model="$ctrl.currentPerson.estEtudiant" aria-label="Etudiant">Etudiant</md-checkbox>
        <md-checkbox ng-model="$ctrl.currentPerson.estGardeAlternee" aria-label="Etudiant">En garde alternée</md-checkbox>   
        <md-checkbox ng-model="$ctrl.currentPerson.estRetraite" aria-label="Retraité">Retraité</md-checkbox>
        <md-checkbox ng-model="$ctrl.currentPerson.estHandicap" aria-label="En situation de handicap">En situation de handicap</md-checkbox>
        <md-checkbox ng-model="$ctrl.currentPerson.estInapteAuTravail" aria-label="Inapte au travail">Inapte au travail</md-checkbox>
        <md-checkbox ng-model="$ctrl.currentPerson.estEnRechercheEmploi" aria-label="En recherche d'emploi">En recherche d'emploi</md-checkbox>
        <md-checkbox ng-model="$ctrl.currentPerson.estBeneficiaireAVS" aria-label="AVS">Bénéficiaire de prestations AVS</md-checkbox>
        <md-checkbox ng-model="$ctrl.currentPerson.estBeneficiaireRI" aria-label="RI">Bénéficiaire d'un revenu d'insertion (RI)</md-checkbox>
      </md-input-container>
      <md-input-container>
        <label>Type de formation</label>
        <md-select ng-model="$ctrl.currentPerson.niveauEtude">
          <md-option>Niveau primaire</md-option>
          <md-option>Niveau secondaire 1</md-option>
          <md-option>Niveau secondaire 2</md-option>
          <md-option>Niveau tertiaire (Université, EPF, HES)</md-option>
        </md-select>
      </md-input-container>

    </div>

    <div layout="row">
      <md-button ui-sref="vous" class="md-raised">Précédent</md-button>
      <span flex></span>
      <md-button ui-sref="logement" class="md-primary md-raised">Suivant</md-button>
    </div>
  </div>
</md-content>